@{
    ViewBag.Title = "Triggers";
}

<p>This page creates a usage trigger which will fire after every three sms messages sent to +1 240-428-6557.</p>

<p>Each time the trigger fires, this we application will receive the trigger notification and display a message below.</p>

<p>@ViewBag.triggerState</p>

<ul></ul>



@section Scripts {

<script src="~/Scripts/jquery.signalR-1.1.3.js" type="text/javascript"></script>
<script src="~/signalr/hubs"></script>

<script>
    $(function () {
        $.connection.hub.logging = true;

        var hub = $.connection.triggerHub;

        hub.client.triggerNotification = function (usageTriggerSid, dateFired, usageCategory, triggerBy, triggerValue, currentUsageValue) {
            $("ul").append($('<li>').append('<span>[' + dateFired + '] ' + usageCategory + '( trigger value: ' + triggerValue + ' current value: ' + currentUsageValue + ' )</span>'));
        };

        $.connection.hub.start();
    });
</script>
}